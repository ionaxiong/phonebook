(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(17),r=t.n(c),a=t(19),o=t(18),i=t(3),u=t(1),s=t(0),d=function(e){var n=e.filtering,t=e.handleFiltering;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{children:["filter shown with ",Object(s.jsx)("input",{value:n,onChange:t})]})})},j=function(e){var n=e.newName,t=e.newNumber,c=e.handleNewName,r=e.handleNewNumber,a=e.addInfo;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:n,onChange:c})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:t,onChange:r})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",onClick:function(e){return a(e)},children:"add"})})]})})},l=function(e){var n=e.persons,t=e.filtering,c=e.handleDeletePerson;return Object(s.jsx)(s.Fragment,{children:""===t?n.map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number,Object(s.jsx)("button",{type:"submit",onClick:function(){return c(e.id)},children:"delete"})]},e.name)})):n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number,Object(s.jsx)("button",{type:"submit",onClick:function(){return c(e.id)},children:"delete"})]},e.name)}))})},b=t(5),f=t.n(b),m="/api/persons",h=function(){return f.a.get(m).then((function(e){return e.data}))},O=function(e){return f.a.post(m,e).then((function(e){return e.data}))},p=function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},g=(t(16),function(e){var n=e.message;return""===n?null:Object(s.jsx)("div",{className:"message",children:n})}),x=function(e){var n=e.warning;return""===n?null:Object(s.jsx)("div",{className:"warning",children:n})},w=function(){var e=Object(u.useState)([{name:"",number:""}]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),b=Object(i.a)(r,2),f=b[0],m=b[1],w=Object(u.useState)(""),N=Object(i.a)(w,2),k=N[0],C=N[1],y=Object(u.useState)(""),F=Object(i.a)(y,2),S=F[0],T=F[1],D=Object(u.useState)(""),I=Object(i.a)(D,2),P=I[0],E=I[1],J=Object(u.useState)(""),L=Object(i.a)(J,2),A=L[0],B=L[1];Object(u.useEffect)((function(){h().then((function(e){c(e)})).catch((function(e){return console.log(e)}))}),[]);var q=function(e){e.preventDefault();var n={name:f,number:k};if(t.find((function(e){return e.name===f}))){if(window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))){var r=Object(a.a)({},t.find((function(e){return e.name===f})));!function(e,n,r){n.number=r,p(e,n).then((function(){var e=Object(o.a)(t);e.map((function(e){return e.name===n.name&&(e.number=r),e})),E("".concat(f,"'s number is changed")),setTimeout((function(){E("")}),5e3),c(e)})).catch((function(e){B("".concat(e.response.data.error)),setTimeout((function(){B("")}),5e3)}))}(r.id,r,k)}}else O(n).then((function(e){c(t.concat(e)),E("Added ".concat(e.name)),setTimeout((function(){E("")}),5e3),m(""),C("")})).catch((function(e){B("".concat(e.response.data.error)),setTimeout((function(){B("")}),5e3),console.log(e)}))};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(g,{message:P}),Object(s.jsx)(x,{warning:A}),Object(s.jsx)(d,{filtering:S,handleFiltering:function(e){T(e.target.value)}}),Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsx)(j,{newName:f,handleNewName:function(e){var n=e.target.value;m(n)},newNumber:k,handleNewNumber:function(e){var n=e.target.value;C(n)},addInfo:function(e){return q(e)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(l,{persons:t,filtering:S,handleDeletePerson:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Delete ".concat(n," ?"))&&v(e).then(c(t.filter((function(n){return n.id!==e})))).catch((function(e){B("Information of ".concat(n," has already been removed from server")),setTimeout((function(){B("")}),5e3),console.log(e)}))}})]})};r.a.render(Object(s.jsx)(w,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.c467d858.chunk.js.map