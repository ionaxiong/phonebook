{"version":3,"sources":["Components/Filter.js","Components/PersonForm.js","Components/Persons.js","Services/personsService.js","Components/Notification.js","Components/Warning.js","App.js","index.js"],"names":["Filter","filtering","handleFiltering","value","onChange","PersonForm","newName","newNumber","handleNewName","handleNewNumber","addInfo","type","onClick","event","Persons","persons","handleDeletePerson","map","person","name","number","id","filter","toLowerCase","includes","url","axios","get","then","response","data","newObject","post","put","delete","Notification","message","className","Warning","warning","App","useState","setPersons","setNewName","setNewNumber","setFiltering","setMessage","setWarning","useEffect","personsService","catch","err","console","log","e","preventDefault","infoObject","existingPerson","find","x","window","confirm","updatedPersons","setTimeout","error","updateNumber","newPerson","concat","target","deletedName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.001f7b66.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({filtering, handleFiltering}) => {\r\n  return (\r\n    <>\r\n      <div>\r\n        filter shown with <input value={filtering} onChange={handleFiltering} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  newName,\r\n  newNumber,\r\n  handleNewName,\r\n  handleNewNumber,\r\n  addInfo,\r\n}) => {\r\n  return (\r\n    <>\r\n      <form>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNewName} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={handleNewNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\" onClick={(event) => addInfo(event)}>\r\n            add\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, filtering, handleDeletePerson }) => {\r\n  return (\r\n    <>\r\n      {filtering === \"\"\r\n        ? persons.map((person) => (\r\n            <p key={person.name}>\r\n              {person.name} {person.number}\r\n              <button\r\n                type=\"submit\"\r\n                onClick={() => handleDeletePerson(person.id)}\r\n              >\r\n                delete\r\n              </button>\r\n            </p>\r\n          ))\r\n        : persons\r\n            .filter((person) =>\r\n              person.name.toLowerCase().includes(filtering.toLowerCase())\r\n            )\r\n            .map((person) => (\r\n              <p key={person.name}>\r\n                {person.name} {person.number}\r\n                <button\r\n                  type=\"submit\"\r\n                  onClick={() => handleDeletePerson(person.id)}\r\n                >\r\n                  delete\r\n                </button>\r\n              </p>\r\n            ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\n\r\nconst url = '/api/persons';\r\n\r\nconst getAll = () => {\r\n  return axios.get(url).then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(url, newObject).then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${url}/${id}`, newObject).then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  return axios.delete(`${url}/${id}`).then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  remove,\r\n};\r\n","import React from \"react\";\r\nimport \"../index.css\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === \"\") {\r\n    return null;\r\n  }\r\n  return <div className=\"message\">{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React from \"react\";\r\nimport \"../index.css\";\r\n\r\nconst Warning = ({ warning }) => {\r\n  if (warning === \"\") {\r\n    return null;\r\n  }\r\n  return <div className=\"warning\">{warning}</div>;\r\n};\r\n\r\nexport default Warning;\r\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./Components/Filter\";\nimport PersonForm from \"./Components/PersonForm\";\nimport Persons from \"./Components/Persons\";\nimport personsService from \"./Services/personsService\";\nimport Notification from \"./Components/Notification\";\nimport Warning from \"./Components/Warning\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([{ name: \"\", number: \"\" }]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filtering, setFiltering] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [warning, setWarning] = useState(\"\");\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then((persons) => {\n        setPersons(persons);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  const handleFiltering = (e) => {\n    setFiltering(e.target.value);\n  };\n\n  const handleNewName = (e) => {\n    const name = e.target.value;\n    setNewName(name);\n  };\n\n  const handleNewNumber = (e) => {\n    const number = e.target.value;\n    setNewNumber(number);\n  };\n\n  const updateNumber = (id, existingPerson, newNumber) => {\n    existingPerson.number = newNumber;\n    return personsService\n      .update(id, existingPerson) // Send the data to the server to be updated\n      .then(() => { // if server responds OK, update local data aswell\n        const updatedPersons = [...persons];\n          updatedPersons.map((x) => {\n            if (x.name === existingPerson.name) {\n              x.number = newNumber;\n            }\n            return x;\n          });\n          setMessage(`${newName}'s number is changed`);\n          setTimeout(() => {\n            setMessage(\"\");\n          }, 5000);\n          setPersons(updatedPersons);\n      })\n      .catch((err) => { // if server has an error, display the error message\n        setWarning(`${err.response.data.error}`);\n        setTimeout(() => {\n          setWarning(\"\");\n        }, 5000);\n      });\n  };\n\n  const addInfo = (e) => {\n    e.preventDefault();\n    const infoObject = { name: newName, number: newNumber };\n    const existingPerson = { ...persons.find((x) => x.name === newName) };\n    if (existingPerson) {\n      const confirm = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      if (confirm) {\n        // refactor code that all the updating happens inside the updateNumber function, \n        // - updating the server\n        // - updating local if the server is fine\n        // - displaying error message\n        updateNumber(existingPerson.id, existingPerson, newNumber);\n      }\n    } else {\n      personsService\n        .create(infoObject)\n        .then((newPerson) => {\n          setPersons(persons.concat(newPerson));\n          setMessage(`Added ${newPerson.name}`);\n          setTimeout(() => {\n            setMessage(\"\");\n          }, 5000);\n          setNewName(\"\");\n          setNewNumber(\"\");\n        })\n        .catch((err) => {\n          setWarning(`${err.response.data.error}`);\n          setTimeout(() => {\n            setWarning(\"\");\n          }, 5000);\n          console.log(err);\n        });\n    }\n  };\n\n  const handleDeletePerson = (id) => {\n    const deletedName = persons.find((person) => person.id === id).name;\n    window.confirm(`Delete ${deletedName} ?`) &&\n      personsService\n        .remove(id)\n        .then(setPersons(persons.filter((person) => person.id !== id)))\n        .catch((err) => {\n          setWarning(\n            `Information of ${deletedName} has already been removed from server`\n          );\n          setTimeout(() => {\n            setWarning(\"\");\n          }, 5000);\n          console.log(err);\n        });\n  };\n\n  return (\n    <>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Warning warning={warning} />\n      <Filter filtering={filtering} handleFiltering={handleFiltering} />\n      <h2>add a new</h2>\n      <PersonForm\n        newName={newName}\n        handleNewName={handleNewName}\n        newNumber={newNumber}\n        handleNewNumber={handleNewNumber}\n        addInfo={(event) => addInfo(event)}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons}\n        filtering={filtering}\n        handleDeletePerson={handleDeletePerson}\n      />\n    </>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}